(function() {
  var flip, flipmini;

  $.ajaxSetup({
    headers: {
      'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
    }
  });

  flip = $('#flipcountdown');

  flip.flipcountdown({
    size: 'sm',
    showHour: true,
    showMinute: true,
    showSecond: true,
    am: false
  });

  flip.css({
    'height': '33px',
    'margin': '4px'
  });

  flipmini = $('#flipcountdownmini');

  flipmini.flipcountdown({
    size: 'xs',
    showHour: false,
    showMinute: true,
    showSecond: false,
    am: false
  });

  flipmini.css({
    'height': '30px',
    'line-height': '30px',
    'margin-top': '6px',
    'white-space': 'nowrap'
  });

  if (window.Notification || window.mozNotification || window.webkitNotification) {
    Notification.requestPermission(function(p) {
      if (p === 'granted') {
        return setInterval(function() {
          return $.ajax({
            url: '/api/waitingPatient',
            type: 'get',
            dataType: 'json',
            data: {},
            success: function(json) {
              if (json && json.result === 'success') {
                return $.each(json.patients, function(index, value) {
                  var notify;
                  notify = new Notification('' + value.patient.prenom + ' ' + value.patient.nom + ' est en attente', {
                    body: json.message,
                    dir: 'ltr',
                    lang: 'FR',
                    silent: false,
                    renotify: true,
                    sticky: true,
                    icon: '/assets/images/logo.png',
                    tag: value.patient.id
                  });
                  return notify.onclick = function() {
                    notify.close();
                    window.location = "/patient/" + this.tag;
                    return window.focus();
                  };
                });
              }
            }
          });
        }, 3000);
      }
    });
  }

}).call(this);

//# sourceMappingURL=itlabspro.min.js.map
